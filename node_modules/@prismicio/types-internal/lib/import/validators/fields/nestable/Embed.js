"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ImportEmbed = exports.ImportEmbedValue = void 0;
const tslib_1 = require("tslib");
const t = (0, tslib_1.__importStar)(require("io-ts"));
const validators_1 = require("../../../../validators");
const ImportContent_1 = require("../ImportContent");
function isValidHttpUrl(param) {
    try {
        if (typeof param !== "string") {
            return false;
        }
        const url = new URL(param);
        return ["http:", "https:"].includes(url.protocol);
    }
    catch (err) {
        return false;
    }
}
const EmbedUrl = new t.Type("EmbedUrl", (u) => isValidHttpUrl(u), (u, c) => {
    if (isValidHttpUrl(u)) {
        return t.success(u);
    }
    else {
        return t.failure(u, c, "The value must be a valid http/https url");
    }
}, t.identity);
exports.ImportEmbedValue = t.strict({
    embed_url: EmbedUrl,
});
exports.ImportEmbed = (0, ImportContent_1.ImportContent)("Embed", (0, validators_1.EmptyObjectOrElse)(exports.ImportEmbedValue));
