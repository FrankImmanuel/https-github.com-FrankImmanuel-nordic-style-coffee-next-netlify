"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ImportSelect = void 0;
const tslib_1 = require("tslib");
const t = (0, tslib_1.__importStar)(require("io-ts"));
const validators_1 = require("../../../../validators");
const ImportContent_1 = require("../ImportContent");
const selectValue = (config) => validators_1.String.pipe(new t.Type("ImportSelectValue", (u) => validators_1.String.is(u), (s, c) => {
    var _a;
    if (!(config === null || config === void 0 ? void 0 : config.options)) {
        return t.failure(s, c, "The value must be defined in the custom type's configuration of the field");
    }
    if (!config.options.includes(s)) {
        return t.failure(s, c, `The value must be one of these: ${(_a = config.options) === null || _a === void 0 ? void 0 : _a.join(",")}`);
    }
    return t.success(s);
}, t.identity));
const ImportSelect = (field) => (0, ImportContent_1.ImportContent)("Select", (0, validators_1.NullOrElse)(selectValue(field === null || field === void 0 ? void 0 : field.config)));
exports.ImportSelect = ImportSelect;
