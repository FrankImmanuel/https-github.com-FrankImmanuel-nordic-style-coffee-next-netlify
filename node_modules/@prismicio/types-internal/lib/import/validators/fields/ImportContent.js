"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ImportContent = void 0;
const tslib_1 = require("tslib");
const fp_ts_1 = require("fp-ts");
const function_1 = require("fp-ts/lib/function");
const t = (0, tslib_1.__importStar)(require("io-ts"));
const Objects_1 = require("../../../utils/Objects");
const ImportContent = (type, valueCodec) => new t.Type(`ImportField: ${valueCodec.name}`, (u) => {
    if (!(0, Objects_1.isObject)(u))
        return false;
    return type === u["type"] && valueCodec.is(u["value"]);
}, (u, c) => {
    return (0, function_1.pipe)(valueCodec.validate(u, c), fp_ts_1.either.map((decodedValue) => {
        return {
            type,
            value: decodedValue,
        };
    }));
}, (field) => field.value);
exports.ImportContent = ImportContent;
