"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ImportField = void 0;
const ImportGroup_1 = require("./ImportGroup");
const ImportSlices_1 = require("./ImportSlices");
const nestable_1 = require("./nestable");
exports.ImportField = {
    is(u) {
        return exports.ImportField.is(u);
    },
    decode: (field) => {
        return (content) => {
            switch (field.type) {
                case "UID":
                    throw new Error(`The field '${field.type}' should be put at the root level of the document`);
                case "Slices":
                    return {
                        codec: (0, ImportSlices_1.ImportSlices)(field),
                        result: (0, ImportSlices_1.ImportSlices)(field).decode(content),
                    };
                case "Group":
                    return {
                        codec: (0, ImportGroup_1.ImportGroup)(field),
                        result: (0, ImportGroup_1.ImportGroup)(field).decode(content),
                    };
                case "Choice":
                    throw new Error(`Unsupported type of field ${field.type}`);
                default:
                    return nestable_1.ImportNestable.decode(field)(content);
            }
        };
    },
};
