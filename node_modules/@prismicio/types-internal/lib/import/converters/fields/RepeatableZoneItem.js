"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.repeatableZoneItemConverter = void 0;
const tslib_1 = require("tslib");
const function_1 = require("fp-ts/function");
const O = (0, tslib_1.__importStar)(require("fp-ts/Option"));
const R = (0, tslib_1.__importStar)(require("fp-ts/Record"));
const nestable_1 = require("./nestable");
/**
 * Converts the RepeatableZoneItem which is a record of widget keys and ImportNestable values to a record of widget keys and NestableContent values.
 *
 * @param content a single RepeatableZoneItem
 * @param assets assets that are required for a conversion of a nestable widget
 * @param embeds embeds that are required for a conversion of a nestable widget
 */
const repeatableZoneItemConverter = (content, assets, embeds) => (0, function_1.pipe)(content, 
// convertNestableWidget can theoretically return undefined, so we need to filter out those values
R.filterMap((contentValue) => (0, function_1.pipe)(contentValue, (content) => content && (0, nestable_1.convertNestableWidget)(content, assets, embeds), O.fromNullable)));
exports.repeatableZoneItemConverter = repeatableZoneItemConverter;
